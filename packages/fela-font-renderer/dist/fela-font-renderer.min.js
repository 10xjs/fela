!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n(require("css-in-js-utils/lib/cssifyDeclaration"),require("css-in-js-utils/lib/cssifyObject")):"function"==typeof define&&define.amd?define(["css-in-js-utils/lib/cssifyDeclaration","css-in-js-utils/lib/cssifyObject"],n):e.FelaFontRenderer=n(e.cssifyDeclaration,e.cssifyObject)}(this,function(e,n){"use strict";function t(e){return"@font-face{"+n(e)+"}"}function r(e,n,t){for(var r=0,i=e.length;r<i;++r)t=n(t,e[r]);return t}function i(e,n,t){for(var r in e)t=n(t,e[r],r);return t}function u(e,t){var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],o=i(e,function(e,t,r){return""+e+r+"{"+n(t)+"}"},"");return r(u,function(e,n){return e+"@"+n+"keyframes "+t+"{"+o+"}"},"")}function o(e,n){return n?"@media "+e+"{"+n+"}":""}function f(e){return"k"+e}function s(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e<=N?T[e-1]+n:s(e/N|0,T[e%N]+n)}function c(e,n){return 0===e.length?n:e+" and "+n}function a(e,n){return e+"{"+n+"}"}function l(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"."+e+n}function d(e){return e.replace(/\s{2,}/g,"")}function y(e,n,t){return e.length>0?r(e,function(e,n){return e=n(e,t)},n):n}function m(e,t){if("string"==typeof e)return d(e);var r=y(t,e,Q);return n(r)}function h(e,n){return"string"==typeof e?e:n?n+JSON.stringify(e):""}function p(e){return"@media"===e.substr(0,6)}function v(e){return J.test(e)}function g(e){return void 0===e||"string"==typeof e&&e.indexOf("undefined")!==-1}function b(e){return"object"===("undefined"==typeof e?"undefined":q.typeof(e))&&!Array.isArray(e)}function O(e){return"&"===e.charAt(0)?e.slice(1):e}function x(e){return r(e,function(e,n){return e[n]="",e},{})}function R(e){return'"'===e.charAt(0)?e:'"'+e+'"'}function S(e){for(var n=0,t=E.length;n<t;++n){var r=E[n];if(e.indexOf(r)!==-1)return z[r]}return""}function j(e,n){for(var t=0,r=e.length;t<r;++t)n(e[t],t)}function P(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r={listeners:[],keyframePrefixes:n.keyframePrefixes||["-webkit-","-moz-"],plugins:n.plugins||[],mediaQueryOrder:n.mediaQueryOrder||[],selectorPrefix:n.selectorPrefix||"",fontFaces:"",keyframes:"",statics:"",rules:"",mediaRules:x(n.mediaQueryOrder||[]),uniqueRuleIdentifier:0,uniqueKeyframeIdentifier:0,cache:{},renderRule:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=y(r.plugins,e(n),I);return r._renderStyleToClassNames(t).slice(1)},renderKeyframe:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e(n),i=JSON.stringify(t);if(!r.cache.hasOwnProperty(i)){var o=f(++r.uniqueKeyframeIdentifier),s=y(r.plugins,t,A),c=u(s,o,r.keyframePrefixes);r.cache[i]=o,r.keyframes+=c,r._emitChange({name:o,keyframe:c,type:A})}return r.cache[i]},renderFont:function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=e+JSON.stringify(i);if(!r.cache.hasOwnProperty(u)){var o=R(e),f=q.extends({},i,{src:n.map(function(e){return"url('"+e+"') format('"+S(e)+"')"}).join(","),fontFamily:o}),s=t(f);r.cache[u]=o,r.fontFaces+=s,r._emitChange({fontFamily:o,fontFace:s,type:K})}return r.cache[u]},renderStatic:function(e,n){var t=h(e,n);if(!r.cache.hasOwnProperty(t)){var i=m(e,r.plugins);r.cache[t]="","string"==typeof e?(r.statics+=i,r._emitChange({type:Q,css:i})):n&&(r.statics+=a(n,i),r._emitChange({selector:n,declaration:i,type:I,static:!0,media:""}))}},renderToString:function(){var e=r.fontFaces+r.statics+r.keyframes+r.rules;return i(r.mediaRules,function(e,n,t){return e+o(t,n)},e)},subscribe:function(e){return r.listeners.push(e),{unsubscribe:function(){return r.listeners.splice(r.listeners.indexOf(e),1)}}},clear:function(){r.fontFaces="",r.keyframes="",r.statics="",r.rules="",r.mediaRules=x(r.mediaQueryOrder),r.uniqueRuleIdentifier=0,r.uniqueKeyframeIdentifier=0,r.cache={},r._emitChange({type:D})},_renderStyleToClassNames:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",u="";for(var o in n){var f=n[o];if(b(f)){if(v(o))u+=r._renderStyleToClassNames(f,t+O(o),i);else if(p(o)){var d=c(i,o.slice(6).trim());u+=r._renderStyleToClassNames(f,t,d)}}else{var y=i+t+o+f;if(!r.cache.hasOwnProperty(y)){if(g(f)){r.cache[y]="";continue}var m=r.selectorPrefix+s(++r.uniqueRuleIdentifier);r.cache[y]=m;var h=e(o,f),x=l(m,t),R=a(x,h);i.length>0?(r.mediaRules.hasOwnProperty(i)||(r.mediaRules[i]=""),r.mediaRules[i]+=R):r.rules+=R,r._emitChange({selector:x,declaration:h,media:i,type:I})}u+=" "+r.cache[y]}}return u},_emitChange:function(e){j(r.listeners,function(n){return n(e)})}};return r.keyframePrefixes.push(""),r.clear(),n.enhancers&&j(n.enhancers,function(e){r=e(r)}),r}function k(e,n){return function(t){if(t.type!==I||t.media)n.textContent=e.renderToString();else try{n.sheet.insertRule(t.selector+"{"+t.declaration+"}",n.sheet.cssRules.length)}catch(e){}}}function C(e){return e&&1===e.nodeType}function w(e,n){if(!C(n))throw new Error("You need to specify a valid element node (nodeType = 1) to render into.");n.setAttribute("data-fela-stylesheet","");var t=k(e,n);e.subscribe(t);var r=e.renderToString();n.textContent!==r&&(n.textContent=r)}function F(e,n){return e.fontRenderer=P(),n&&w(e.fontRenderer,n),e.renderFont=function(n,t,r){return e.fontRenderer.renderFont(n,t,r)},e}function _(e){return function(n){return F(n,e)}}e="default"in e?e.default:e,n="default"in n?n.default:n;var q={};q.typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q.defineProperty=function(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e},q.extends=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e};var T="abcdefghijklmnopqrstuvwxyz",N=T.length,I=1,A=2,K=3,Q=4,D=5,J=/^(:|\[|>|&)/,z={".woff":"woff",".eot":"eot",".ttf":"truetype",".svg":"svg"},E=Object.keys(z);return _});