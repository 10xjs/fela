!function(e,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):e.Fela=r()}(this,function(){"use strict";function e(e,r){return r={exports:{}},e(r,r.exports),r.exports}function r(e,r){return S(e)+":"+r}function n(e){var n="";for(var t in e)"string"!=typeof e[t]&&"number"!=typeof e[t]||(n&&(n+=";"),n+=r(t,e[t]));return n}function t(e){return"@font-face{"+n(e)+"}"}function i(e,r){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],i=Object.keys(e).reduce(function(r,t){return r+t+"{"+n(e[t])+"}"},"");return t.reduce(function(e,n){return e+"@"+n+"keyframes "+r+"{"+i+"}"},"")}function o(e,r){return r?"@media "+e+"{"+r+"}":""}function a(e){return"k"+e}function u(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e<=R?_[e-1]+r:u(e/R|0,_[e%R]+r)}function f(e,r){return 0===e.length?r:e+" and "+r}function c(e,r){return e+"{"+r+"}"}function s(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return"."+e+r}function l(e){return e.replace(/\s{2,}/g,"")}function y(e,r,n){for(var t=0;t<e.length;++t)r=e[t](r,n);return r}function p(e,r){if("string"==typeof e)return l(e);var t=y(r,e,q);return n(t)}function d(e,r){return"string"==typeof e?e:r+JSON.stringify(e)}function h(e){return"@media"===e.substr(0,6)}function m(e){return null!==e.match(/^(:|\[|>|&)/g)}function v(e){return void 0===e||"string"==typeof e&&e.indexOf("undefined")>-1}function g(e){return"&"===e.charAt(0)?e.slice(1):e}function b(e){for(var r={},n=0,t=e.length;n<t;++n)r[e[n]]="";return r}function O(e){return'"'===e.charAt(0)?e:'"'+e+'"'}function x(e){for(var r=0,n=J.length;r<n;++r){var t=J[r];if(e.indexOf(t)!==-1)return E[t]}}function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={listeners:[],keyframePrefixes:e.keyframePrefixes||["-webkit-","-moz-"],plugins:e.plugins||[],mediaQueryOrder:e.mediaQueryOrder||[],selectorPrefix:e.selectorPrefix||"",clear:function(){n.fontFaces="",n.keyframes="",n.statics="",n.rules="",n.mediaRules=b(n.mediaQueryOrder),n.rendered=[],n.uniqueRuleIdentifier=0,n.uniqueKeyframeIdentifier=0,n.cache={},n._emitChange({type:I})},renderRule:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=y(n.plugins,e(r),F);return n._renderStyleToClassNames(t)},_renderStyleToClassNames:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o="";for(var a in e){var l=e[a];if(l instanceof Object){if(m(a))o+=n._renderStyleToClassNames(l,t+g(a),i);else if(h(a)){var y=f(i,a.slice(6).trim());o+=n._renderStyleToClassNames(l,t,y)}}else{var p=i+t+a+l;if(!n.cache[p]){if(v(l)){n.cache[p]="";continue}var d=n.selectorPrefix+u(++n.uniqueRuleIdentifier);n.cache[p]=d;var b=r(a,l),O=s(d,t),x=c(O,b);i?(n.mediaRules.hasOwnProperty(i)||(n.mediaRules[i]=""),n.mediaRules[i]+=x):n.rules+=x,n._emitChange({selector:O,declaration:b,media:i,type:F})}o+=" "+n.cache[p]}}return o.trim()},renderKeyframe:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=e(r),o=JSON.stringify(t);if(!n.cache[o]){var u=a(++n.uniqueKeyframeIdentifier),f=y(n.plugins,t,N),c=i(f,u,n.keyframePrefixes);n.cache[o]=u,n.keyframes+=c,n._emitChange({name:u,keyframe:c,type:N})}return n.cache[o]},renderFont:function(e,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=e+JSON.stringify(i);if(!n.cache[o]){var a=O(e),u=k.extends({},i,{src:r.map(function(e){return"url('"+e+"') format('"+x(e)+"')"}).join(","),fontFamily:a}),f=t(u);n.cache[o]=a,n.fontFaces+=f,n._emitChange({fontFamily:a,fontFace:f,type:T})}return n.cache[o]},renderStatic:function(e,r){var t=d(e,r);if(!n.cache[t]){var i=p(e,n.plugins);n.cache[t]=!0,"string"==typeof e?(n.statics+=i,n._emitChange({type:q,css:i})):(n.statics+=c(r,i),n._emitChange({selector:r,declaration:i,type:F,media:""}))}},renderToString:function(){var e=n.fontFaces+n.statics+n.keyframes+n.rules;for(var r in n.mediaRules)e+=o(r,n.mediaRules[r]);return e},subscribe:function(e){return n.listeners.push(e),{unsubscribe:function(){return n.listeners.splice(n.listeners.indexOf(e),1)}}},_emitChange:function(e){for(var r=0,t=n.listeners.length;r<t;++r)n.listeners[r](e)}};if(n.keyframePrefixes.push(""),n.clear(),e.enhancers)for(var l=0,C=e.enhancers.length;l<C;++l)n=e.enhancers[l](n);return n}function A(e){for(var r=arguments.length,n=Array(r>1?r-1:0),t=1;t<r;t++)n[t-1]=arguments[t];for(var i=0,o=n.length;i<o;++i){var a=n[i];for(var u in a){var f=a[u],c=e[u];if(c instanceof Object){if(Array.isArray(c)){Array.isArray(f)?e[u]=[].concat(k.toConsumableArray(c),k.toConsumableArray(f)):e[u]=[].concat(k.toConsumableArray(c),[f]);continue}if(f instanceof Object&&!Array.isArray(f)){e[u]=A({},c,f);continue}}e[u]=f}}return e}function j(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return function(e){for(var n={},t=0,i=r.length;t<i;++t)A(n,r[t](e));return n}}function w(){for(var e=arguments.length,r=Array(e),n=0;n<e;n++)r[n]=arguments[n];return function(e){return function(n){for(var t=e(n),i=0,o=r.length;i<o;++i)t=r[i](t);return t}}}var k={};k.typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k.classCallCheck=function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")},k.createClass=function(){function e(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(r,n,t){return n&&e(r.prototype,n),t&&e(r,t),r}}(),k.defineProperty=function(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e},k.extends=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},k.inherits=function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function, not "+typeof r);e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),r&&(Object.setPrototypeOf?Object.setPrototypeOf(e,r):e.__proto__=r)},k.objectWithoutProperties=function(e,r){var n={};for(var t in e)r.indexOf(t)>=0||Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n},k.possibleConstructorReturn=function(e,r){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!r||"object"!=typeof r&&"function"!=typeof r?e:r},k.toConsumableArray=function(e){if(Array.isArray(e)){for(var r=0,n=Array(e.length);r<e.length;r++)n[r]=e[r];return n}return Array.from(e)};var P=e(function(e){function r(e){return e in i?i[e]:i[e]=e.replace(n,"-$&").toLowerCase().replace(t,"-ms-")}var n=/[A-Z]/g,t=/^ms-/,i={};e.exports=r}),S=P&&"object"==typeof P&&"default"in P?P.default:P,_="abcdefghijklmnopqrstuvwxyz",R=_.length,F=1,N=2,T=3,q=4,I=5,E={".woff":"woff",".eot":"eot",".ttf":"truetype",".svg":"svg"},J=Object.keys(E),K={createRenderer:C,combineRules:j,enhance:w};return K});